Récupération de questions suivant la méthode des boites de Leitner :
Génère une commande SQL qui renvoie N questions : en priorité les questions qui ne sont présentes dans aucun quiz (aucune occurence de la question dans quizquestion)

SELECT q.* FROM Question q 
JOIN Account a ON q.account_id = a.id 
WHERE q.id NOT IN (SELECT question_id FROM QuizQuestion)

puis les questions présentes dans quizquestion (on regarde uniquement la dernière occurence pour cette question).
Pour chaque question, on vérifie que la dernière réponse à la question est antérieure au délai du numéro de boite en cours,
et on classe de la question la plus importante avec le numéro de boite le plus faible à la moins importante avec un numéro de boite élevé

SELECT q.* FROM Question q 
JOIN QuizQuestion qq ON q.id = qq.question_id
JOIN Account a ON q.account_id = a.id
WHERE qq.id = (SELECT MAX(id) FROM QuizQuestion WHERE question_id = q.id)

SELECT q.* FROM Question q
JOIN Account a ON q.account_id = a.id
JOIN QuizQuestion qq ON q.id = qq.question_id
WHERE qq.id = (SELECT MAX(id) FROM QuizQuestion WHERE question_id = q.id)
JOIN LeitnerParameters lp ON lp.box_number = qq.box_number
JOIN Quiz qz ON qz.id = qq.quiz_id AND qz.created_at < DATEADD(DAY, -lp.leitner_delay, GETDATE())
ORDER BY lp.box_number ASC, qq.last_answer_date ASC